{"ast":null,"code":"import { observable } from '@trpc/server/observable';\n\n/** @internal */\nfunction createChain(opts) {\n  return observable(observer => {\n    function execute(index = 0, op = opts.op) {\n      const next = opts.links[index];\n      if (!next) {\n        throw new Error('No more links to execute - did you forget to add an ending link?');\n      }\n      const subscription = next({\n        op,\n        next(nextOp) {\n          const nextObserver = execute(index + 1, nextOp);\n          return nextObserver;\n        }\n      });\n      return subscription;\n    }\n    const obs$ = execute();\n    return obs$.subscribe(observer);\n  });\n}\nfunction asArray(value) {\n  return Array.isArray(value) ? value : [value];\n}\nfunction splitLink(opts) {\n  return runtime => {\n    const yes = asArray(opts.true).map(link => link(runtime));\n    const no = asArray(opts.false).map(link => link(runtime));\n    return props => {\n      return observable(observer => {\n        const links = opts.condition(props.op) ? yes : no;\n        return createChain({\n          op: props.op,\n          links\n        }).subscribe(observer);\n      });\n    };\n  };\n}\nexport { createChain as c, splitLink as s };","map":{"version":3,"names":["observable","createChain","opts","observer","execute","index","op","next","links","Error","subscription","nextOp","nextObserver","obs$","subscribe","asArray","value","Array","isArray","splitLink","runtime","yes","true","map","link","no","false","props","condition","c","s"],"sources":["/Users/danilakiva/jspool/s21_arcade_games/node_modules/@trpc/client/dist/splitLink-4c75f7be.mjs"],"sourcesContent":["import { observable } from '@trpc/server/observable';\n\n/** @internal */ function createChain(opts) {\n    return observable((observer)=>{\n        function execute(index = 0, op = opts.op) {\n            const next = opts.links[index];\n            if (!next) {\n                throw new Error('No more links to execute - did you forget to add an ending link?');\n            }\n            const subscription = next({\n                op,\n                next (nextOp) {\n                    const nextObserver = execute(index + 1, nextOp);\n                    return nextObserver;\n                }\n            });\n            return subscription;\n        }\n        const obs$ = execute();\n        return obs$.subscribe(observer);\n    });\n}\n\nfunction asArray(value) {\n    return Array.isArray(value) ? value : [\n        value\n    ];\n}\nfunction splitLink(opts) {\n    return (runtime)=>{\n        const yes = asArray(opts.true).map((link)=>link(runtime));\n        const no = asArray(opts.false).map((link)=>link(runtime));\n        return (props)=>{\n            return observable((observer)=>{\n                const links = opts.condition(props.op) ? yes : no;\n                return createChain({\n                    op: props.op,\n                    links\n                }).subscribe(observer);\n            });\n        };\n    };\n}\n\nexport { createChain as c, splitLink as s };\n"],"mappings":"AAAA,SAASA,UAAU,QAAQ,yBAAyB;;AAEpD;AAAiB,SAASC,WAAWA,CAACC,IAAI,EAAE;EACxC,OAAOF,UAAU,CAAEG,QAAQ,IAAG;IAC1B,SAASC,OAAOA,CAACC,KAAK,GAAG,CAAC,EAAEC,EAAE,GAAGJ,IAAI,CAACI,EAAE,EAAE;MACtC,MAAMC,IAAI,GAAGL,IAAI,CAACM,KAAK,CAACH,KAAK,CAAC;MAC9B,IAAI,CAACE,IAAI,EAAE;QACP,MAAM,IAAIE,KAAK,CAAC,kEAAkE,CAAC;MACvF;MACA,MAAMC,YAAY,GAAGH,IAAI,CAAC;QACtBD,EAAE;QACFC,IAAIA,CAAEI,MAAM,EAAE;UACV,MAAMC,YAAY,GAAGR,OAAO,CAACC,KAAK,GAAG,CAAC,EAAEM,MAAM,CAAC;UAC/C,OAAOC,YAAY;QACvB;MACJ,CAAC,CAAC;MACF,OAAOF,YAAY;IACvB;IACA,MAAMG,IAAI,GAAGT,OAAO,CAAC,CAAC;IACtB,OAAOS,IAAI,CAACC,SAAS,CAACX,QAAQ,CAAC;EACnC,CAAC,CAAC;AACN;AAEA,SAASY,OAAOA,CAACC,KAAK,EAAE;EACpB,OAAOC,KAAK,CAACC,OAAO,CAACF,KAAK,CAAC,GAAGA,KAAK,GAAG,CAClCA,KAAK,CACR;AACL;AACA,SAASG,SAASA,CAACjB,IAAI,EAAE;EACrB,OAAQkB,OAAO,IAAG;IACd,MAAMC,GAAG,GAAGN,OAAO,CAACb,IAAI,CAACoB,IAAI,CAAC,CAACC,GAAG,CAAEC,IAAI,IAAGA,IAAI,CAACJ,OAAO,CAAC,CAAC;IACzD,MAAMK,EAAE,GAAGV,OAAO,CAACb,IAAI,CAACwB,KAAK,CAAC,CAACH,GAAG,CAAEC,IAAI,IAAGA,IAAI,CAACJ,OAAO,CAAC,CAAC;IACzD,OAAQO,KAAK,IAAG;MACZ,OAAO3B,UAAU,CAAEG,QAAQ,IAAG;QAC1B,MAAMK,KAAK,GAAGN,IAAI,CAAC0B,SAAS,CAACD,KAAK,CAACrB,EAAE,CAAC,GAAGe,GAAG,GAAGI,EAAE;QACjD,OAAOxB,WAAW,CAAC;UACfK,EAAE,EAAEqB,KAAK,CAACrB,EAAE;UACZE;QACJ,CAAC,CAAC,CAACM,SAAS,CAACX,QAAQ,CAAC;MAC1B,CAAC,CAAC;IACN,CAAC;EACL,CAAC;AACL;AAEA,SAASF,WAAW,IAAI4B,CAAC,EAAEV,SAAS,IAAIW,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}